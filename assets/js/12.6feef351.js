(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{260:function(e,t,a){"use strict";a.r(t);var r=a(0),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"koishi-test-utils-更新日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#koishi-test-utils-更新日志"}},[e._v("#")]),e._v(" koishi-test-utils 更新日志")]),e._v(" "),a("p",[e._v("本页面包括 koishi-test-utils 的更新日志。")]),e._v(" "),a("h2",{attrs:{id:"_3-0-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-1"}},[e._v("#")]),e._v(" 3.0.1 (koishi 1.8.0)")]),e._v(" "),a("h2",{attrs:{id:"_3-0-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-0"}},[e._v("#")]),e._v(" 3.0.0 (Koishi 1.7.0)")]),e._v(" "),a("h3",{attrs:{id:"breaking-changes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#breaking-changes"}},[e._v("#")]),e._v(" Breaking Changes")]),e._v(" "),a("ul",[a("li",[e._v("调整了部分 Session API 的语法 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/8799a2dac2ce61b76b10fdfe245ea2f05c9947a8",target:"_blank",rel:"noopener noreferrer"}},[e._v("8799a2d")]),e._v(", "),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/cf175f7b5863a192772d06ae0baccd251018fbe6",target:"_blank",rel:"noopener noreferrer"}},[e._v("cf175f7")]),e._v(")")]),e._v(" "),a("li",[e._v("调整了 "),a("code",[e._v("app.receiveGroupRequest()")]),e._v(" 的语法 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/16fd63e95a82c9cd3f088c4376d0aa24043db21d",target:"_blank",rel:"noopener noreferrer"}},[e._v("16fd63e")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[e._v("新增了 Mocked Utilities API")])]),e._v(" "),a("h3",{attrs:{id:"bug-fixes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bug-fixes"}},[e._v("#")]),e._v(" Bug Fixes")]),e._v(" "),a("ul",[a("li",[e._v("使用 "),a("code",[e._v("''")]),e._v(" 作为默认快照名，修复了与 jest 25 的兼容性的问题 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/154a409f08e83af971822a51fd6403495e27c21f",target:"_blank",rel:"noopener noreferrer"}},[e._v("154a409")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),a("ul",[a("li",[e._v("jest 版本从 24.9.0 更新到 25.1.0 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/dd2fbe3784303184d9cb4698f24d2be92275f447",target:"_blank",rel:"noopener noreferrer"}},[e._v("dd2fbe3")]),e._v(")")])]),e._v(" "),a("h2",{attrs:{id:"_2-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-0"}},[e._v("#")]),e._v(" 2.1.0 (Koishi 1.6.0)")]),e._v(" "),a("h3",{attrs:{id:"features-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features-2"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("test-utils:")]),e._v(" 新增一些基于 "),a("code",[e._v("app.receive()")]),e._v(" 的方法 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/a0fd83101cc601049ec15dfc2ced826110fb1909",target:"_blank",rel:"noopener noreferrer"}},[e._v("a0fd831")]),e._v(")")]),e._v(" "),a("li",[a("strong",[e._v("test-utils:")]),e._v(" 新增实验性的 Random Mock API ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/533f4defc2ddcfb3064ca9a5b4af88eb42a1ac7c",target:"_blank",rel:"noopener noreferrer"}},[e._v("533f4de")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"dependencies-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-2"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),a("ul",[a("li",[e._v("axios 版本从 0.19.1 更新到 0.19.2 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/6889e5ded06996b5e3e0cebbeaf0a8200937c5a7",target:"_blank",rel:"noopener noreferrer"}},[e._v("6889e5d")]),e._v(")")])]),e._v(" "),a("h2",{attrs:{id:"_2-0-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-0-0"}},[e._v("#")]),e._v(" 2.0.0 (koishi 1.5.0)")]),e._v(" "),a("h3",{attrs:{id:"breaking-changes-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#breaking-changes-2"}},[e._v("#")]),e._v(" Breaking Changes")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("mockedApp.receive()")]),e._v(" 改为同步函数 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/dd851f84888478040d8092807adb4f4bc486a529",target:"_blank",rel:"noopener noreferrer"}},[e._v("dd851f8")]),e._v(")")]),e._v(" "),a("li",[a("code",[e._v("MemoryDatabase")]),e._v(" 成为独立的包 koishi-database-memory ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/e06b98ee0d71cf8bf806f196e1c830f418550154",target:"_blank",rel:"noopener noreferrer"}},[e._v("e06b98e")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"features-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features-3"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[e._v("新增了 MockedServer API ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/2c5ab8fb864ca247bfa8cb37fd79e32f5d24b6fa",target:"_blank",rel:"noopener noreferrer"}},[e._v("2c5ab8f")]),e._v(")")]),e._v(" "),a("li",[e._v("新增了 MemoryDatabase API ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/2c94ac6f827929c95b79bfcd8e085e1636b62732",target:"_blank",rel:"noopener noreferrer"}},[e._v("2c94ac6")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"bug-fixes-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bug-fixes-2"}},[e._v("#")]),e._v(" Bug Fixes")]),e._v(" "),a("ul",[a("li",[e._v("修复了调用 "),a("code",[e._v("sender.sendPrivateMsgAsync()")]),e._v(" 时没有自动去除 "),a("code",[e._v("_async")]),e._v(" 后缀的问题 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/8c3f3cc7e264e35c505b3aa80906572c493bbf61",target:"_blank",rel:"noopener noreferrer"}},[e._v("8c3f3cc")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"dependencies-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-3"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),a("ul",[a("li",[e._v("get-port 版本从 5.1.0 更新至 5.1.1 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/dfd279ceb95c2da1fe44e6fa7fb73bac36085417",target:"_blank",rel:"noopener noreferrer"}},[e._v("dfd279c")]),e._v(")")])]),e._v(" "),a("h2",{attrs:{id:"_1-2-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2"}},[e._v("#")]),e._v(" 1.2.2 (koishi 1.4.0)")]),e._v(" "),a("h2",{attrs:{id:"_1-2-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1"}},[e._v("#")]),e._v(" 1.2.1 (koishi 1.3.1)")]),e._v(" "),a("h2",{attrs:{id:"_1-2-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-0"}},[e._v("#")]),e._v(" 1.2.0 (koishi 1.3.0)")]),e._v(" "),a("h3",{attrs:{id:"features-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features-4"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("mockedApp")]),e._v(" 内置 logger 将输出到 debug ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/036584297359bf63a4e7b0458502bb89f3c2533f",target:"_blank",rel:"noopener noreferrer"}},[e._v("0365842")]),e._v(")")]),e._v(" "),a("li",[e._v("新增 "),a("code",[e._v("mockedApp.receiveMessage()")]),e._v(" 等方法 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/3fc34bdb4b486d19f18419f7621957b5648cb47a",target:"_blank",rel:"noopener noreferrer"}},[e._v("3fc34bd")]),e._v(")")])]),e._v(" "),a("h3",{attrs:{id:"bug-fixes-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bug-fixes-3"}},[e._v("#")]),e._v(" Bug Fixes")]),e._v(" "),a("ul",[a("li",[e._v("修复了 "),a("code",[e._v("mockedApp.shouldHaveLastRequests()")]),e._v(" 的类型批注 ("),a("a",{attrs:{href:"https://github.com/koishijs/koishi/commit/a3c8494c62fc5089493e931a8b1186ad55f0bab4",target:"_blank",rel:"noopener noreferrer"}},[e._v("a3c8494")]),e._v(")")])]),e._v(" "),a("h2",{attrs:{id:"_1-1-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-0"}},[e._v("#")]),e._v(" 1.1.0 (koishi 1.2.0)")]),e._v(" "),a("h3",{attrs:{id:"features-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#features-5"}},[e._v("#")]),e._v(" Features")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("testDatabase()")]),e._v(" 第二个参数改为必选")]),e._v(" "),a("li",[e._v("新增 "),a("code",[e._v("createHttpServer()")]),e._v(" 和 "),a("code",[e._v("createWsServer()")]),e._v("，用于模拟 CQHTTP 服务器")]),e._v(" "),a("li",[e._v("新增类 "),a("code",[e._v("MemoryDatabase")]),e._v("，用于在内存中模拟数据库")]),e._v(" "),a("li",[e._v("新增类 "),a("code",[e._v("MockedApp")]),e._v("，用于在无网络环境下测试")])]),e._v(" "),a("h3",{attrs:{id:"dependencies-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-4"}},[e._v("#")]),e._v(" Dependencies")]),e._v(" "),a("ul",[a("li",[e._v("将 jest 和 koishi-core 设为同版本依赖")]),e._v(" "),a("li",[e._v("新增了 get-port 依赖，移除了 express 依赖")]),e._v(" "),a("li",[e._v("axios 版本从 0.19.0 更新至 0.19.1")])])])}),[],!1,null,null,null);t.default=s.exports}}]);