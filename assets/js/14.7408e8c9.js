(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{263:function(t,a,e){"use strict";e.r(a);var v=e(0),o=Object(v.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"上下文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上下文"}},[t._v("#")]),t._v(" 上下文 (Context)")]),t._v(" "),e("p",[e("strong",[t._v("上下文 (Context)")]),t._v(" 是 Koishi 的重要概念。你的每一个插件，中间件，监听器和指令都被绑定在上下文上。")]),t._v(" "),e("h2",{attrs:{id:"ctx-database"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-database"}},[t._v("#")]),t._v(" ctx.database")]),t._v(" "),e("p",[t._v("当前 App 的数据库对象。参见 "),e("router-link",{attrs:{to:"/api/database.html"}},[t._v("数据库")]),t._v("。")],1),t._v(" "),e("h2",{attrs:{id:"ctx-sender"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-sender"}},[t._v("#")]),t._v(" ctx.sender")]),t._v(" "),e("p",[t._v("当前 App 的发送器对象。参见 "),e("router-link",{attrs:{to:"/api/sender.html"}},[t._v("发送器")]),t._v("。")],1),t._v(" "),e("h2",{attrs:{id:"ctx-receiver"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-receiver"}},[t._v("#")]),t._v(" ctx.receiver")]),t._v(" "),e("p",[t._v("当前上下文的接收器对象。参见 "),e("router-link",{attrs:{to:"/api/receiver.html"}},[t._v("接收器")]),t._v("。")],1),t._v(" "),e("h2",{attrs:{id:"ctx-plus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-plus"}},[t._v("#")]),t._v(" ctx.plus(context)")]),t._v(" "),e("p",[t._v("在已有上下文的基础上加上其他上下文。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("context:")]),t._v(" "),e("code",[t._v("Context")]),t._v(" 要加上的上下文")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("Context")]),t._v(" 新的上下文")])]),t._v(" "),e("h2",{attrs:{id:"ctx-minus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-minus"}},[t._v("#")]),t._v(" ctx.minus(context)")]),t._v(" "),e("p",[t._v("在已有上下文的基础上除去其他上下文。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("context:")]),t._v(" "),e("code",[t._v("Context")]),t._v(" 要除去的上下文")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("Context")]),t._v(" 新的上下文")])]),t._v(" "),e("h2",{attrs:{id:"ctx-intersect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-intersect"}},[t._v("#")]),t._v(" ctx.intersect(context)")]),t._v(" "),e("p",[t._v("给出当前上下文和其他上下文的交集")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("context:")]),t._v(" "),e("code",[t._v("Context")]),t._v(" 要求交集的上下文")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("Context")]),t._v(" 新的上下文")])]),t._v(" "),e("h2",{attrs:{id:"ctx-inverse"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-inverse"}},[t._v("#")]),t._v(" ctx.inverse()")]),t._v(" "),e("p",[t._v("求出当前上下文的补集。")]),t._v(" "),e("ul",[e("li",[t._v("返回值: "),e("code",[t._v("Context")]),t._v(" 新的上下文")])]),t._v(" "),e("h2",{attrs:{id:"ctx-match"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-match"}},[t._v("#")]),t._v(" ctx.match(meta)")]),t._v(" "),e("p",[t._v("测试上下文能否匹配元信息对象。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("meta:")]),t._v(" "),e("code",[t._v("Meta")]),t._v(" 元信息对象")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("boolean")]),t._v(" 匹配结果")])]),t._v(" "),e("h2",{attrs:{id:"ctx-contain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-contain"}},[t._v("#")]),t._v(" ctx.contain(context)")]),t._v(" "),e("p",[t._v("判断当前上下文是否完全包含了另一个上下文。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("context:")]),t._v(" "),e("code",[t._v("Context")]),t._v(" 要比较的上下文")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("boolean")]),t._v(" 比较结果")])]),t._v(" "),e("h2",{attrs:{id:"ctx-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-plugin"}},[t._v("#")]),t._v(" ctx.plugin(plugin, options?)")]),t._v(" "),e("p",[t._v("当前上下文中安装一个插件。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("plugin:")]),t._v(" "),e("code",[t._v("Plugin<T, U>")]),t._v(" 要安装的插件")]),t._v(" "),e("li",[e("strong",[t._v("options:")]),t._v(" "),e("code",[t._v("U")]),t._v(" 要传入插件的参数，如果为 "),e("code",[t._v("false")]),t._v(" 则插件不会被安装")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("this")])])]),t._v(" "),e("CodeContainer",{attrs:{title:""}},[e("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[e("code",[e("span",{staticStyle:{color:"#66D9EF"}},[t._v("type")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("PluginFunction")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" <")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("extends")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("Context")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("> ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" (")]),e("span",{staticStyle:{color:"#FD971F"}},[t._v("ctx")]),e("span",{staticStyle:{color:"#F92672"}},[t._v(":")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#FD971F"}},[t._v("options")]),e("span",{staticStyle:{color:"#F92672"}},[t._v(":")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("void")]),t._v("\n"),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("type")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("PluginObject")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" <")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("extends")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("Context")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("> ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" { apply")]),e("span",{staticStyle:{color:"#F92672"}},[t._v(":")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("PluginFunction")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("<")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("> }")]),t._v("\n"),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("type")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("Plugin")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" <")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("extends")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("Context")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("> ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("PluginFunction")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("<")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("> ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("|")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("PluginObject")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("<")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("T")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("U")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(">")])])])]),e("h2",{attrs:{id:"ctx-middleware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-middleware"}},[t._v("#")]),t._v(" ctx.middleware(middleware)")]),t._v(" "),e("p",[t._v("当前上下文中注册一个中间件。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("middleware:")]),t._v(" "),e("router-link",{attrs:{to:"/guide/receive-and-send.html#中间件"}},[e("code",[t._v("Middleware")])]),t._v(" 要注册的中间件")],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("this")])])]),t._v(" "),e("h2",{attrs:{id:"ctx-prependmiddleware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-prependmiddleware"}},[t._v("#")]),t._v(" ctx.prependMiddleware(middleware)")]),t._v(" "),e("p",[t._v("当前上下文中注册一个前置中间件。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("middleware:")]),t._v(" "),e("router-link",{attrs:{to:"/guide/receive-and-send.html#中间件"}},[e("code",[t._v("Middleware")])]),t._v(" 要注册的前置中间件")],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("this")])])]),t._v(" "),e("h2",{attrs:{id:"ctx-removemiddleware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-removemiddleware"}},[t._v("#")]),t._v(" ctx.removeMiddleware(middleware)")]),t._v(" "),e("p",[t._v("移除当前上下文中一个已注册的中间件。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("middleware:")]),t._v(" "),e("router-link",{attrs:{to:"/guide/receive-and-send.html#中间件"}},[e("code",[t._v("Middleware")])]),t._v(" 要移除的中间件")],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("boolean")]),t._v(" 是否存在该中间件")])]),t._v(" "),e("h2",{attrs:{id:"ctx-command"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-command"}},[t._v("#")]),t._v(" ctx.command(rawName, description?, config?)")]),t._v(" "),e("p",[t._v("在当前上下文中注册或修改一个指令。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("rawName:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 指令名以及可能的参数")]),t._v(" "),e("li",[t._v("description?: "),e("code",[t._v("string")]),t._v(" 指令的描述")]),t._v(" "),e("li",[t._v("config?: "),e("router-link",{attrs:{to:"/guide/command-system.html#commandconfig-对象"}},[e("code",[t._v("CommandConfig")])]),t._v(" 指令的配置")],1),t._v(" "),e("li",[t._v("返回值："),e("router-link",{attrs:{to:"/api/command.html"}},[e("code",[t._v("Command")])]),t._v(" 注册或修改的指令")],1)]),t._v(" "),e("h2",{attrs:{id:"ctx-getcommand"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-getcommand"}},[t._v("#")]),t._v(" ctx.getCommand(name, meta?)")]),t._v(" "),e("p",[t._v("在当前上下文中获取一个指令。如果提供了 "),e("code",[t._v("meta")]),t._v("，将会检测指令是否可以匹配 "),e("code",[t._v("meta.$path")]),t._v("；否则将使用 "),e("code",[t._v("this.path")]),t._v(" 进行匹配。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("name:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 指令名")]),t._v(" "),e("li",[e("strong",[t._v("meta:")]),t._v(" "),e("router-link",{attrs:{to:"/guide/receive-and-send.html#深入-meta-对象"}},[e("code",[t._v("Meta")])]),t._v(" 元信息对象")],1),t._v(" "),e("li",[t._v("返回值："),e("router-link",{attrs:{to:"/api/command.html"}},[e("code",[t._v("Command")])]),t._v(" 匹配的指令")],1)]),t._v(" "),e("h2",{attrs:{id:"ctx-runcommand"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-runcommand"}},[t._v("#")]),t._v(" ctx.runCommand(name, meta, args?, options?, rest?)")]),t._v(" "),e("p",[t._v("在当前上下文中执行一个指令。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("name:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 指令名")]),t._v(" "),e("li",[e("strong",[t._v("meta:")]),t._v(" "),e("router-link",{attrs:{to:"/guide/receive-and-send.html#深入-meta-对象"}},[e("code",[t._v("Meta")])]),t._v(" 元信息对象")],1),t._v(" "),e("li",[e("strong",[t._v("args:")]),t._v(" "),e("code",[t._v("string[]")]),t._v(" 参数列表")]),t._v(" "),e("li",[e("strong",[t._v("options:")]),t._v(" "),e("code",[t._v("Record<string, any>")]),t._v(" 选项列表")]),t._v(" "),e("li",[e("strong",[t._v("rest:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 剩余参数，参见 "),e("router-link",{attrs:{to:"/guide/command-system.html#剩余参数"}},[t._v("剩余参数")])],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("Promise<void>")])])]),t._v(" "),e("h2",{attrs:{id:"ctx-logger"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-logger"}},[t._v("#")]),t._v(" ctx.logger(scope?) "),e("Badge",{attrs:{text:"1.3.0+"}})],1),t._v(" "),e("p",[t._v("根据 scope 生成一个 "),e("router-link",{attrs:{to:"/guide/logger.html#使用-logger"}},[t._v("Logger 对象")]),t._v("。")],1),t._v(" "),e("ul",[e("li",[e("strong",[t._v("scope:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 要指定的类型，默认为 "),e("code",[t._v("''")])]),t._v(" "),e("li",[t._v("返回值: "),e("router-link",{attrs:{to:"/guide/logger.html#使用-logger"}},[e("code",[t._v("Logger")])])],1)]),t._v(" "),e("h2",{attrs:{id:"ctx-end"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ctx-end"}},[t._v("#")]),t._v(" ctx.end()")]),t._v(" "),e("p",[t._v("返回当前上下文所在的 App 实例，可用于链式调用。")]),t._v(" "),e("ul",[e("li",[t._v("返回值: "),e("router-link",{attrs:{to:"/api/app.html"}},[e("code",[t._v("App")])]),t._v(" 当前上下文所在的 App 实例")],1)])],1)}),[],!1,null,null,null);a.default=o.exports}}]);