<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>koishi 更新日志 | Koishi</title>
    <meta name="description" content="">
    <link rel="icon" href="/koishi.png">
  <meta name="theme-color" content="#5546a3">
    
    <link rel="preload" href="/assets/css/0.styles.67004ee5.css" as="style"><link rel="preload" href="/assets/js/app.3f171bfd.js" as="script"><link rel="preload" href="/assets/js/2.3565e134.js" as="script"><link rel="preload" href="/assets/js/7.7ead5f91.js" as="script"><link rel="preload" href="/assets/js/11.0361f298.js" as="script"><link rel="prefetch" href="/assets/js/10.6ba8c7c3.js"><link rel="prefetch" href="/assets/js/12.6feef351.js"><link rel="prefetch" href="/assets/js/13.b03b21a5.js"><link rel="prefetch" href="/assets/js/14.7408e8c9.js"><link rel="prefetch" href="/assets/js/15.e425130e.js"><link rel="prefetch" href="/assets/js/16.bd95b0a3.js"><link rel="prefetch" href="/assets/js/17.65321faf.js"><link rel="prefetch" href="/assets/js/18.d4a026f6.js"><link rel="prefetch" href="/assets/js/19.b003494e.js"><link rel="prefetch" href="/assets/js/20.6c2e7043.js"><link rel="prefetch" href="/assets/js/21.b60b723a.js"><link rel="prefetch" href="/assets/js/22.2a3430f3.js"><link rel="prefetch" href="/assets/js/23.6940fd73.js"><link rel="prefetch" href="/assets/js/24.7fe53199.js"><link rel="prefetch" href="/assets/js/25.ebf135f0.js"><link rel="prefetch" href="/assets/js/26.be672138.js"><link rel="prefetch" href="/assets/js/27.e20002b3.js"><link rel="prefetch" href="/assets/js/28.69ca12b5.js"><link rel="prefetch" href="/assets/js/29.ca63b0d7.js"><link rel="prefetch" href="/assets/js/3.bed41596.js"><link rel="prefetch" href="/assets/js/30.5695b9a5.js"><link rel="prefetch" href="/assets/js/31.f444d79e.js"><link rel="prefetch" href="/assets/js/32.533ce854.js"><link rel="prefetch" href="/assets/js/33.ff4207d6.js"><link rel="prefetch" href="/assets/js/34.986f75fa.js"><link rel="prefetch" href="/assets/js/35.e3da5f3e.js"><link rel="prefetch" href="/assets/js/36.bae8843f.js"><link rel="prefetch" href="/assets/js/37.ef24995f.js"><link rel="prefetch" href="/assets/js/38.f4d52f32.js"><link rel="prefetch" href="/assets/js/39.8943d2cb.js"><link rel="prefetch" href="/assets/js/4.4199422d.js"><link rel="prefetch" href="/assets/js/40.f49a6865.js"><link rel="prefetch" href="/assets/js/41.70a7cd69.js"><link rel="prefetch" href="/assets/js/42.ba75fafa.js"><link rel="prefetch" href="/assets/js/43.d39a9a23.js"><link rel="prefetch" href="/assets/js/44.5b7b25c8.js"><link rel="prefetch" href="/assets/js/45.6803e6ce.js"><link rel="prefetch" href="/assets/js/46.df0d977d.js"><link rel="prefetch" href="/assets/js/47.85e8efcb.js"><link rel="prefetch" href="/assets/js/48.8f0535ba.js"><link rel="prefetch" href="/assets/js/49.25d25bcb.js"><link rel="prefetch" href="/assets/js/5.eca008f9.js"><link rel="prefetch" href="/assets/js/50.91c50898.js"><link rel="prefetch" href="/assets/js/51.fb8e2d27.js"><link rel="prefetch" href="/assets/js/52.553e26b3.js"><link rel="prefetch" href="/assets/js/53.cdfa1d8b.js"><link rel="prefetch" href="/assets/js/54.10c7ce33.js"><link rel="prefetch" href="/assets/js/55.8cf064a4.js"><link rel="prefetch" href="/assets/js/56.37f13474.js"><link rel="prefetch" href="/assets/js/57.40b1896f.js"><link rel="prefetch" href="/assets/js/58.6a993147.js"><link rel="prefetch" href="/assets/js/6.b31803c1.js"><link rel="prefetch" href="/assets/js/8.b72d0443.js"><link rel="prefetch" href="/assets/js/9.64e1463f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.67004ee5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/koishi.png" alt="Koishi" class="logo"> <span class="site-name can-hide">Koishi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">官方插件</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">指南</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">API</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">官方插件</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/api/" class="sidebar-link">总览</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>核心 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/global.html" class="sidebar-link">全局 API</a></li><li><a href="/api/context.html" class="sidebar-link">上下文 (Context)</a></li><li><a href="/api/app.html" class="sidebar-link">应用 (App)</a></li><li><a href="/api/receiver.html" class="sidebar-link">接收器 (Receiver)</a></li><li><a href="/api/sender.html" class="sidebar-link">发送器 (Sender)</a></li><li><a href="/api/command.html" class="sidebar-link">指令 (Command)</a></li><li><a href="/api/database.html" class="sidebar-link">数据库 (Database)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他官方包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/utils.html" class="sidebar-link">其他工具 (Utils)</a></li><li><a href="/api/test-utils.html" class="sidebar-link">测试工具 (Test Utils)</a></li><li><a href="/api/database/level.html" class="sidebar-link">数据库：Level</a></li><li><a href="/api/database/memory.html" class="sidebar-link">数据库：memory</a></li><li><a href="/api/database/mysql.html" class="sidebar-link">数据库：MySQL</a></li><li><a href="/api/database/sqlite.html" class="sidebar-link">数据库：sqlite</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>更新日志</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/changelog/koishi.html" class="active sidebar-link">koishi 及其依赖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-8-0" class="sidebar-link">1.8.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-7-0" class="sidebar-link">1.7.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-6-0" class="sidebar-link">1.6.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-5-0" class="sidebar-link">1.5.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-4-0" class="sidebar-link">1.4.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-3-1" class="sidebar-link">1.3.1</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-3-0" class="sidebar-link">1.3.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-2-0" class="sidebar-link">1.2.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-1-1" class="sidebar-link">1.1.1</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-1-0" class="sidebar-link">1.1.0</a></li><li class="sidebar-sub-header"><a href="/api/changelog/koishi.html#_1-0-1" class="sidebar-link">1.0.1</a></li></ul></li><li><a href="/api/changelog/test-utils.html" class="sidebar-link">koishi-test-utils</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="koishi-更新日志"><a href="#koishi-更新日志" class="header-anchor">#</a> koishi 更新日志</h1> <p>本页面包括 koishi 及其依赖的更新日志。</p> <h2 id="_1-8-0"><a href="#_1-8-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.8.0" target="_blank" rel="noopener noreferrer">1.8.0</a></h2> <h3 id="features"><a href="#features" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 指令默认情况下将隐藏 -h, --help 选项 (<a href="https://github.com/koishijs/koishi/commit/a84621d61d9cbb8bb1d4322f0662c5eea91866cb" target="_blank" rel="noopener noreferrer">a84621d</a>)</li> <li><strong>core:</strong> 优化了类型标注 (<a href="https://github.com/koishijs/koishi/commit/24467231ae7313f680dc90aa6c2df02f7d938bd4" target="_blank" rel="noopener noreferrer">2446723</a>)</li> <li><strong>core:</strong> 优化了调用记录检查 (<a href="https://github.com/koishijs/koishi/commit/5f8d8e12338d488d26cb06ff8de599878d85353f" target="_blank" rel="noopener noreferrer">5f8d8e1</a>)</li> <li><strong>core:</strong> 默认情况下将使用 debug 处理 logger 输出 (<a href="https://github.com/koishijs/koishi/commit/ea8c3d120ba99f47b092a78cc743dec7ff6bcfa6" target="_blank" rel="noopener noreferrer">ea8c3d1</a>)</li> <li><strong>cli:</strong> 优化了启动时的报错提示 (<a href="https://github.com/koishijs/koishi/commit/b51060089d75fdbce3686babdf255527f2a25b0b" target="_blank" rel="noopener noreferrer">b510600</a>)</li> <li><strong>plugin-common:</strong> 增加了 authorize 插件的 logger 提示 (<a href="https://github.com/koishijs/koishi/commit/2f36aca21467a4ec5042fa532e90d7d2c2250928" target="_blank" rel="noopener noreferrer">2f36aca</a>, <a href="https://github.com/koishijs/koishi/commit/fb7dbe6553271713bc1c3dba7bd7ae5a5212e9fb" target="_blank" rel="noopener noreferrer">fb7dbe6</a>)</li></ul> <h3 id="bug-fixes"><a href="#bug-fixes" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> 修复了 CommandConfig.disable 选项的无效行为 (<a href="https://github.com/koishijs/koishi/commit/1cffdab6929edb4cb190e854442a2bf9cc83b34a" target="_blank" rel="noopener noreferrer">1cffdab</a>)</li> <li><strong>core:</strong> 修复了 disable 指令仍可以通过错误纠正机制被调用的问题 (<a href="https://github.com/koishijs/koishi/commit/95cf8787adeda7ba91b09e93da361178666274d4" target="_blank" rel="noopener noreferrer">95cf878</a>)</li> <li><strong>core:</strong> 修复了无法处理 heartbeat 事件的问题 (<a href="https://github.com/koishijs/koishi/commit/36a460236acf114d760a05fbc9c2102718b17a86" target="_blank" rel="noopener noreferrer">36a4602</a>)</li> <li><strong>cli:</strong> 修复了错误的路径解析 (<a href="https://github.com/koishijs/koishi/commit/06d59b83a49b4d299a0422139102c23e64dca80e" target="_blank" rel="noopener noreferrer">06d59b8</a>)</li> <li><strong>plugin-common:</strong> 选项的显示将不考虑隐藏选项 (<a href="https://github.com/koishijs/koishi/commit/6b1530a58594b1fd5b95da8f2c319e7eb0e75782" target="_blank" rel="noopener noreferrer">6b1530a</a>)</li> <li><strong>plugin-common:</strong> 修复了 authorization 的错误行为 (<a href="https://github.com/koishijs/koishi/commit/76663bcd82c1472cf4a4c3353c4614550eeb7be4" target="_blank" rel="noopener noreferrer">76663bc</a>)</li></ul> <h3 id="dependencies"><a href="#dependencies" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>cli:</strong> cac 版本从 6.5.5 更新至 6.5.6</li> <li>所有官方数据库支持都将 koishi-core 改为 peerDependency</li></ul> <h2 id="_1-7-0"><a href="#_1-7-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.7.0" target="_blank" rel="noopener noreferrer">1.7.0</a></h2> <h3 id="features-2"><a href="#features-2" class="header-anchor">#</a> Features</h3> <ul><li><strong>cli:</strong> 输出日志时会显示 scope (<a href="https://github.com/koishijs/koishi/commit/a245fa325b80a8925c06c751bc37cf715289e814" target="_blank" rel="noopener noreferrer">a245fa3</a>)</li> <li><strong>core:</strong> before-user, before-group, attach 三个事件将在对应的上下文触发 (<a href="https://github.com/koishijs/koishi/commit/658944a5fcce5fcabae0731b4c62a97401b4ab3e" target="_blank" rel="noopener noreferrer">658944a</a>)</li> <li><strong>plugin-common:</strong> <code>registerUserInfo()</code> 支持传入第三个参数 (<a href="https://github.com/koishijs/koishi/commit/7119a584e1d3ef81b6e3dabc07c3ca45343dee95" target="_blank" rel="noopener noreferrer">7119a58</a>)</li> <li><strong>plugin-common:</strong> 新增 <code>contextify --member</code> 选项 (<a href="https://github.com/koishijs/koishi/commit/7eb6d206b0e216f2198fd582e18fa917fb6244ed" target="_blank" rel="noopener noreferrer">7eb6d20</a>)</li> <li><strong>plugin-nlp:</strong> 使用 <code>meta.$parsed.message</code> 取代 <code>meta.message</code> (<a href="https://github.com/koishijs/koishi/commit/5d4d7fe0c6a0c20c81114f215ce2fa44730f59b9" target="_blank" rel="noopener noreferrer">5d4d7fe</a>)</li> <li><strong>plugin-nlp:</strong> <code>cmd.intend()</code> 将返回 <code>this</code> 以便链式调用 (<a href="https://github.com/koishijs/koishi/commit/8036e02c93098242119ee0d7c5fbfeac499957f2" target="_blank" rel="noopener noreferrer">8036e02</a>)</li></ul> <h3 id="bug-fixes-2"><a href="#bug-fixes-2" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> 快捷调用的 message 将自动去除头部空格 (<a href="https://github.com/koishijs/koishi/commit/abb749850f3d883105dec45f127ab8008948cc04" target="_blank" rel="noopener noreferrer">abb7498</a>, <a href="https://github.com/koishijs/koishi/commit/f72ba21de418a7b71efc92821eb4aecbd42b066b" target="_blank" rel="noopener noreferrer">f72ba21</a>)</li></ul> <h3 id="dependencies-2"><a href="#dependencies-2" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>database-mysql</strong>: mysql 版本从 2.18.0 更新到 2.18.1 (<a href="https://github.com/koishijs/koishi/commit/dd2fbe3784303184d9cb4698f24d2be92275f447" target="_blank" rel="noopener noreferrer">dd2fbe3</a>)</li></ul> <h2 id="_1-6-0"><a href="#_1-6-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.6.0" target="_blank" rel="noopener noreferrer">1.6.0</a></h2> <h3 id="features-3"><a href="#features-3" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 新增 <code>ctx.onceMiddleware()</code> (<a href="https://github.com/koishijs/koishi/commit/7a1dd9426bee8fc3440a7226aa93199482063dc4" target="_blank" rel="noopener noreferrer">7a1dd94</a>)</li> <li><strong>core:</strong> 新增 <code>getUsage()</code> 和 <code>updateUsage()</code> 方法 (<a href="https://github.com/koishijs/koishi/commit/15271593097cf80b9b94de5f9968f2124b7637a8" target="_blank" rel="noopener noreferrer">1527159</a>)</li> <li><strong>core:</strong> <code>meta.$stripped</code> 更改为 <code>meta.$parsed</code> (<a href="https://github.com/koishijs/koishi/commit/c3b0b5094a6776050fcabf4f0d51b7231225f6de" target="_blank" rel="noopener noreferrer">c3b0b50</a>)</li> <li><strong>core:</strong> 新增 <code>sender.sendMsg()</code> 和 <code>sender.sendMsgAsync()</code> 方法 (<a href="https://github.com/koishijs/koishi/commit/1c3cfeee3d3231d4904fadbc0d27da30a3d8f1d7" target="_blank" rel="noopener noreferrer">1c3cfee</a>)</li> <li><strong>cli:</strong> optimize ecosystem module resolution (<a href="https://github.com/koishijs/koishi/commit/ed505b1c9413121f26dfb42a692706124a3e71c4" target="_blank" rel="noopener noreferrer">ed505b1</a>)</li></ul> <h3 id="bug-fixes-3"><a href="#bug-fixes-3" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> <code>app.users</code> 等特殊上下文现在将按需生成了 (<a href="https://github.com/koishijs/koishi/commit/3ae7e7044d06daa2ea76e24af15358c5764b9887" target="_blank" rel="noopener noreferrer">3ae7e70</a>)</li> <li><strong>core:</strong> 异步发送消息现在会触发 before-send 事件了 (<a href="https://github.com/koishijs/koishi/commit/1c3cfeee3d3231d4904fadbc0d27da30a3d8f1d7" target="_blank" rel="noopener noreferrer">1c3cfee</a>)</li></ul> <h3 id="dependencies-3"><a href="#dependencies-3" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>core</strong>: axios 版本从 0.19.1 更新到 0.19.2 (<a href="https://github.com/koishijs/koishi/commit/6889e5ded06996b5e3e0cebbeaf0a8200937c5a7" target="_blank" rel="noopener noreferrer">6889e5d</a>)</li> <li><strong>database-mysql</strong>: mysql 版本从 2.17.1 更新到 2.18.0 (<a href="https://github.com/koishijs/koishi/commit/6889e5ded06996b5e3e0cebbeaf0a8200937c5a7" target="_blank" rel="noopener noreferrer">6889e5d</a>)</li></ul> <h2 id="_1-5-0"><a href="#_1-5-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.5.0" target="_blank" rel="noopener noreferrer">1.5.0</a></h2> <h3 id="features-4"><a href="#features-4" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 新增 after-middleware 事件 (<a href="https://github.com/koishijs/koishi/commit/bb678943188392705eddad03525eed993d147604" target="_blank" rel="noopener noreferrer">bb67894</a>)</li> <li><strong>core:</strong> 内置运行时警告改为使用 <code>logger().warn()</code> 输出 (<a href="https://github.com/koishijs/koishi/commit/d33781c29166da397d051c6813c1573dc91a934c" target="_blank" rel="noopener noreferrer">d33781c</a>)</li> <li><strong>cli:</strong> 优化了输出的提示 (<a href="https://github.com/koishijs/koishi/commit/59052bb0a6e7225cde00120cd6b240f53bb6233f" target="_blank" rel="noopener noreferrer">59052bb</a>)</li> <li><strong>cli:</strong> 优化了错误处理函数 (<a href="https://github.com/koishijs/koishi/commit/34ebc6ee84c909eaa6a5e636eaa442d7af88ff64" target="_blank" rel="noopener noreferrer">34ebc6e</a>)</li> <li><strong>cli:</strong> 支持在配置文件中使用对象/函数式的插件 (<a href="https://github.com/koishijs/koishi/commit/37e4bdda24eec669758f301ef3d72e9ff69fa503" target="_blank" rel="noopener noreferrer">37e4bdd</a>)</li></ul> <h3 id="dependencies-4"><a href="#dependencies-4" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>cli:</strong> cac 版本从 6.5.4 更新至 6.5.5 (<a href="https://github.com/koishijs/koishi/commit/dfd279ceb95c2da1fe44e6fa7fb73bac36085417" target="_blank" rel="noopener noreferrer">dfd279c</a>)</li></ul> <h3 id="common-plugin-2-0-0"><a href="#common-plugin-2-0-0" class="header-anchor">#</a> Common Plugin 2.0.0</h3> <h4 id="breaking-changes"><a href="#breaking-changes" class="header-anchor">#</a> Breaking Changes</h4> <ul><li>重构了传入的选项列表 (<a href="https://github.com/koishijs/koishi/commit/c5c4283b14e7fbbb057655373972428d6d84fe67" target="_blank" rel="noopener noreferrer">c5c4283</a>)</li> <li>移除了 repeater 和 request-handler 插件的默认行为 (<a href="https://github.com/koishijs/koishi/commit/117b12efe3a9087a5cf1ca88d10cd4f2cc681f48" target="_blank" rel="noopener noreferrer">117b12e</a>)</li></ul> <h4 id="features-5"><a href="#features-5" class="header-anchor">#</a> Features</h4> <ul><li>新增了 exec 指令 (<a href="https://github.com/koishijs/koishi/commit/bf36c713cb7178d10a5c45db4963debfceeadd4f" target="_blank" rel="noopener noreferrer">bf36c71</a>)</li> <li>authorize 指令优化与修复 (<a href="https://github.com/koishijs/koishi/commit/e67243deb309232c26d1e6feec05a680df31f5dc" target="_blank" rel="noopener noreferrer">e67243d</a>, <a href="https://github.com/koishijs/koishi/commit/45f83ee069be04f71610080996ce79b8b4a54b4d" target="_blank" rel="noopener noreferrer">45f83ee</a>)</li> <li>contextify 指令优化与修复 (<a href="https://github.com/koishijs/koishi/commit/7769a5097b4b2003866010a8bdae6b74a27a90bf" target="_blank" rel="noopener noreferrer">7769a50</a>)</li> <li>echo 指令优化与修复 (<a href="https://github.com/koishijs/koishi/commit/fd2973fc0d98097823bf16e50668e468c2428901" target="_blank" rel="noopener noreferrer">fd2973f</a>)</li> <li>info 指令优化与修复 (<a href="https://github.com/koishijs/koishi/commit/e84d7005282319e3bd930ee8f807895923a218f8" target="_blank" rel="noopener noreferrer">e84d700</a>)</li></ul> <h2 id="_1-4-0"><a href="#_1-4-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.4.0" target="_blank" rel="noopener noreferrer">1.4.0</a></h2> <h3 id="features-6"><a href="#features-6" class="header-anchor">#</a> Features</h3> <ul><li><strong>cli:</strong> 支持 ts 作为配置文件后缀名 (<a href="https://github.com/koishijs/koishi/commit/f551d44e59351c60d12255b641407aa201505c8d" target="_blank" rel="noopener noreferrer">f551d44</a>)</li> <li><strong>cli:</strong> koishi init 命令将自动创建文件所在的目录 (<a href="https://github.com/koishijs/koishi/commit/644c6b36274a8fdc3c3b76c0e92bb266ca0302e3" target="_blank" rel="noopener noreferrer">644c6b3</a>)</li> <li><strong>cli:</strong> 内置插件将直接被 koishi 导出 (<a href="https://github.com/koishijs/koishi/commit/e9c3b9cb68d2b2db48cf7cc399f041baf162ef94" target="_blank" rel="noopener noreferrer">e9c3b9c</a>)</li> <li><strong>core:</strong> 新增 <code>app.status</code> 属性表示应用状态 (<a href="https://github.com/koishijs/koishi/commit/75c64b3db2b8527dce0d5a19be6c84aa6f620e27" target="_blank" rel="noopener noreferrer">75c64b3</a>)</li> <li><strong>core:</strong> send 事件的元信息对象将带有 <code>userId</code> 属性 (<a href="https://github.com/koishijs/koishi/commit/edee314c6e13ba8488e21c4912b8b02625f8a41d" target="_blank" rel="noopener noreferrer">edee314</a>)</li> <li>移除已经废弃的 <code>user.name</code> 属性和 <code>rank</code>, <code>callme</code>, <code>likeme</code> 指令 (<a href="https://github.com/koishijs/koishi/commit/96740791da106eec7c828e941368134ee00413fd" target="_blank" rel="noopener noreferrer">9674079</a>, <a href="https://github.com/koishijs/koishi/commit/87be3c1d5219c22f2390b214419bcf0a8e71d5ab" target="_blank" rel="noopener noreferrer">87be3c1</a>, <a href="https://github.com/koishijs/koishi/commit/20ebbae66e975f73c5e00edc8eb538df62cc5286" target="_blank" rel="noopener noreferrer">20ebbae</a>, <a href="https://github.com/koishijs/koishi/commit/ce4feb16f9aa692da62bc4f6c102815db9d74a37" target="_blank" rel="noopener noreferrer">ce4feb1</a>, <a href="https://github.com/koishijs/koishi/commit/9293540991161d466d5b5090d6f6d4d6cda6662b" target="_blank" rel="noopener noreferrer">9293540</a>)</li></ul> <h3 id="bug-fixes-4"><a href="#bug-fixes-4" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>cli:</strong> 修复了 <code>PluginConfig</code> 的类型 (<a href="https://github.com/koishijs/koishi/commit/b3501a607ea4d450be388896b2c6e40c5fa2350b" target="_blank" rel="noopener noreferrer">b3501a6</a>)</li> <li><strong>core:</strong> <code>getTargetId</code> 函数将检测输入的类型 (<a href="https://github.com/koishijs/koishi/commit/00ab2cec270d4fa439c50a5672c1dd2f5344e443" target="_blank" rel="noopener noreferrer">00ab2ce</a>)</li></ul> <h2 id="_1-3-1"><a href="#_1-3-1" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.3.1" target="_blank" rel="noopener noreferrer">1.3.1</a></h2> <h3 id="features-7"><a href="#features-7" class="header-anchor">#</a> Features</h3> <ul><li><strong>cli:</strong> 支持向子进程传入 execArgv (<a href="https://github.com/koishijs/koishi/commit/3bb9f5afa1b89c2718d24ea5ddace2f50dc9b193" target="_blank" rel="noopener noreferrer">3bb9f5a</a>)</li> <li><strong>plugin-common:</strong> 支持 requestHandler 传入字符串 (<a href="https://github.com/koishijs/koishi/commit/936c871919f2ffbe2d421da2c92ae3c10139e87e" target="_blank" rel="noopener noreferrer">936c871</a>)</li> <li><strong>plugin-common:</strong> 优化了 admin 指令的调用，增加了一些操作方式 (<a href="https://github.com/koishijs/koishi/commit/0cc58cffa6ed750124963f65b8c1cfaf82da752f" target="_blank" rel="noopener noreferrer">0cc58cf</a>)</li></ul> <h3 id="bug-fixes-5"><a href="#bug-fixes-5" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>cli:</strong> 修复了错误的输出等级设置 (<a href="https://github.com/koishijs/koishi/commit/ab967c4c465e957106ea1b3c1a4f5f8faf8c70d4" target="_blank" rel="noopener noreferrer">ab967c4</a>, <a href="https://github.com/koishijs/koishi/commit/38cc1e14d681239746dd84f72e4868241521203b" target="_blank" rel="noopener noreferrer">38cc1e1</a>)</li> <li><strong>core:</strong> 修复了同时使用长参数和 oneArg 选项时的错误行为 (<a href="https://github.com/koishijs/koishi/commit/71a0174835170304883dbfb146b17edc38fcd78b" target="_blank" rel="noopener noreferrer">71a0174</a>, <a href="https://github.com/koishijs/koishi/commit/1932845ff3962bce16e2454fb40ff64b6c0b9725" target="_blank" rel="noopener noreferrer">1932845</a>)</li> <li><strong>database-sqlite:</strong> 修复了 sqlite 注入类型错误 (<a href="https://github.com/koishijs/koishi/commit/f592c6cca9143f87e4e311262cd01ea5b0825a3e" target="_blank" rel="noopener noreferrer">f592c6c</a>)</li> <li><strong>plugin-common:</strong> 为 help 执行添加了 userFields (<a href="https://github.com/koishijs/koishi/commit/c7650cbc4df2772ce609b33bc8f9a1025efb4cef" target="_blank" rel="noopener noreferrer">c7650cb</a>)</li></ul> <h2 id="_1-3-0"><a href="#_1-3-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.3.0" target="_blank" rel="noopener noreferrer">1.3.0</a></h2> <h3 id="features-8"><a href="#features-8" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 支持了 <code>ctx.logger()</code> 方法和 <code>logger</code> 事件 (<a href="https://github.com/koishijs/koishi/commit/5e5e93e0f8ed112ddbdf14f2ec1205c466b3ab03" target="_blank" rel="noopener noreferrer">5e5e93e</a>, <a href="https://github.com/koishijs/koishi/commit/1e0848e05d4f136dee6689d03657c7bbde4660c6" target="_blank" rel="noopener noreferrer">1e0848e</a>, <a href="https://github.com/koishijs/koishi/commit/fa5c46e13ed5f179aca0624e20e3894359c4be2b" target="_blank" rel="noopener noreferrer">fa5c46e</a>)</li> <li><strong>cli:</strong> 支持通过 logLevel, logFilter 等控制输出等级 (<a href="https://github.com/koishijs/koishi/commit/befca0fd39bde6fddb2319d13fa2f3f320335810" target="_blank" rel="noopener noreferrer">befca0f</a>)</li> <li><strong>cli:</strong> 处理 <code>unhandledRejection</code> 事件并输出 (<a href="https://github.com/koishijs/koishi/commit/8f6d6fababd9ee4534eff17853182f2b8a80d6d8" target="_blank" rel="noopener noreferrer">8f6d6fa</a>)</li> <li><strong>cli:</strong> 支持 yaml/yml 作为配置文件类型 (<a href="https://github.com/koishijs/koishi/commit/27645a4803af77257f544bbd709c62f2dc2cd11d" target="_blank" rel="noopener noreferrer">27645a4</a>)</li> <li><strong>plugin-common:</strong> repeater 插件的部分选项支持 <code>message</code> 参数 (<a href="https://github.com/koishijs/koishi/commit/e67b81749b731574f2fdbfd36bb3a150165d8c9b" target="_blank" rel="noopener noreferrer">e67b817</a>)</li> <li><strong>plugin-schedule:</strong> 正式发布 koishi-plugin-schedule 1.0.0 版本，并作为 koishi 的内置插件 (<a href="https://github.com/koishijs/koishi/commit/27645a4803af77257f544bbd709c62f2dc2cd11d" target="_blank" rel="noopener noreferrer">27645a4</a>)</li></ul> <h3 id="bug-fixes-6"><a href="#bug-fixes-6" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>plugin-common:</strong> 修复了 authorize 插件无法使用的问题 (<a href="https://github.com/koishijs/koishi/commit/5a777a964b6fb2906ca85e1c833d0fd277d71578" target="_blank" rel="noopener noreferrer">5a777a9</a>)</li> <li><strong>database-mysql:</strong> 修复了 <code>db.getGroup()</code> 报错的问题 (<a href="https://github.com/koishijs/koishi/pull/16" target="_blank" rel="noopener noreferrer">#16</a>) (<a href="https://github.com/koishijs/koishi/commit/3ce0c70b771e74fc93dd41cc0ec08a0952a42174" target="_blank" rel="noopener noreferrer">3ce0c70</a>)</li></ul> <h3 id="dependencies-5"><a href="#dependencies-5" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>core:</strong> cac 版本从 6.5.3 更新至 6.5.4 (<a href="https://github.com/koishijs/koishi/commit/ed9d61bd77eef52c85c9b2037a282b67fb8c2151" target="_blank" rel="noopener noreferrer">ed9d61b</a>)</li></ul> <h2 id="_1-2-0"><a href="#_1-2-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.2.0" target="_blank" rel="noopener noreferrer">1.2.0</a></h2> <h3 id="features-9"><a href="#features-9" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 移除了 <code>meta.$path</code> 属性</li> <li><strong>core:</strong> 优化了一些类型标注 (<a href="https://github.com/koishijs/koishi/commit/c8f01f8cc9afde1b20bd202f914d7e3c8b523be0" target="_blank" rel="noopener noreferrer">c8f01f8</a>, <a href="https://github.com/koishijs/koishi/commit/f8e1c1b686e75b0ccc4e5fce85b53563b1b22404" target="_blank" rel="noopener noreferrer">f8e1c1b</a>)</li> <li><strong>plugin-common:</strong> respondent 插件支持简繁体模糊匹配 (<a href="https://github.com/koishijs/koishi/commit/cb5838833edda734570b24d3d350b7dcc128df96" target="_blank" rel="noopener noreferrer">cb58388</a>)</li></ul> <h3 id="bug-fixes-7"><a href="#bug-fixes-7" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> <code>server.listen()</code> 失败后将自动调用 <code>server.close()</code> (<a href="https://github.com/koishijs/koishi/commit/ea5c2c933f1fb0a6f4c52a8dccab5ec3e7e63b6d" target="_blank" rel="noopener noreferrer">ea5c2c9</a>)</li> <li><strong>core:</strong> 允许 <code>injectMethods()</code> 在 <code>registerDatabase()</code> 之前调用 (<a href="https://github.com/koishijs/koishi/commit/9540892c34007f36cde147ef64bae5fd27773d0f" target="_blank" rel="noopener noreferrer">9540892</a>)</li> <li><strong>core:</strong> 修复了 <code>showSuggestions</code> 在非私聊上下文出错的问题 (<a href="https://github.com/koishijs/koishi/commit/8253522eba27099520838857353ed2933bef028b" target="_blank" rel="noopener noreferrer">8253522</a>)</li> <li><strong>plugin-common:</strong> 修复了 requestHandler 插件在无数据库环境下报错的问题 (<a href="https://github.com/koishijs/koishi/commit/cb5838833edda734570b24d3d350b7dcc128df96" target="_blank" rel="noopener noreferrer">cb58388</a>)</li> <li><strong>plugin-common:</strong> 修复了 welcome 插件在无数据库环境下报错的问题 (<a href="https://github.com/koishijs/koishi/commit/ea5c2c933f1fb0a6f4c52a8dccab5ec3e7e63b6d" target="_blank" rel="noopener noreferrer">ea5c2c9</a>)</li></ul> <h3 id="dependencies-6"><a href="#dependencies-6" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>core:</strong> axios 版本从 0.19.0 更新至 0.19.1 (<a href="https://github.com/koishijs/koishi/commit/01bebe0a234601b85197c1cd1200bf6c2e441863" target="_blank" rel="noopener noreferrer">01bebe0</a>)</li></ul> <h2 id="_1-1-1"><a href="#_1-1-1" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.1.1" target="_blank" rel="noopener noreferrer">1.1.1</a></h2> <h3 id="features-10"><a href="#features-10" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> 支持数组结构的<a href="https://cqhttp.cc/docs/4.13/#/Message" target="_blank" rel="noopener noreferrer">消息格式</a> (<a href="https://github.com/koishijs/koishi/commit/766ba8efcd724717d89608a692c68a00059aa1cd" target="_blank" rel="noopener noreferrer">766ba8e</a>)</li> <li><strong>utils:</strong> 新增 <code>CQCode.stringifyAll()</code> 和 <code>CQCode.parseAll()</code> (<a href="https://github.com/koishijs/koishi/commit/764b816b50a84c09e577cb6b315ebdf584156747" target="_blank" rel="noopener noreferrer">764b816</a>)</li></ul> <h3 id="bug-fixes-8"><a href="#bug-fixes-8" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> 在 <code>cmd.execute()</code> 中等待错误提示的发送 (<a href="https://github.com/koishijs/koishi/commit/3783f42bc9df8afb0d83dc187cd756b89eb5ef0a" target="_blank" rel="noopener noreferrer">3783f42</a>)</li></ul> <h2 id="_1-1-0"><a href="#_1-1-0" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.1.0" target="_blank" rel="noopener noreferrer">1.1.0</a></h2> <h3 id="features-11"><a href="#features-11" class="header-anchor">#</a> Features</h3> <ul><li><strong>core:</strong> ready 事件总是在 connect 事件之后触发 (<a href="https://github.com/koishijs/koishi/commit/21197dfef3092cd0c5ea3c38922ff32ecefb234c" target="_blank" rel="noopener noreferrer">21197df</a>)</li> <li><strong>core:</strong> <code>cmd.option()</code> 允许略去 description 参数 (<a href="https://github.com/koishijs/koishi/commit/1c3b203de92944ef04f20ccdc2dbda300ca08fdf" target="_blank" rel="noopener noreferrer">1c3b203</a>)</li> <li><strong>core:</strong> 新增 <code>app.executeCommandLine()</code> 用于直接运行指令 (<a href="https://github.com/koishijs/koishi/pull/9" target="_blank" rel="noopener noreferrer">#9</a>) (<a href="https://github.com/koishijs/koishi/commit/bcd3ed6a515f33cb6e440cff5bb0d12b719a1e43" target="_blank" rel="noopener noreferrer">bcd3ed6</a>)</li></ul> <h3 id="bug-fixes-9"><a href="#bug-fixes-9" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>core:</strong> <code>ctx.command()</code> 未传入 description 参数时，不会覆盖已有的值 (<a href="https://github.com/koishijs/koishi/commit/f1c360547370c7161754163d881a5df69a4c5fa8" target="_blank" rel="noopener noreferrer">f1c3605</a>)</li> <li><strong>utils:</strong> 优化了 <code>CQCode.unescape()</code> 中的替换顺序 (<a href="https://github.com/koishijs/koishi/commit/1c8e33cf939af6159c956d72447615adf319ff3e" target="_blank" rel="noopener noreferrer">1c8e33c</a>)</li> <li><strong>plugin-common:</strong> help 指令将不会将指令名显示为别名 (<a href="https://github.com/koishijs/koishi/commit/e22653b227cc8e373b2df47a0c908b1c0d9a6cbc" target="_blank" rel="noopener noreferrer">e22653b</a>)</li></ul> <h3 id="dependencies-7"><a href="#dependencies-7" class="header-anchor">#</a> Dependencies</h3> <ul><li><strong>core:</strong> ws 版本从 7.2.0 更新至 7.2.1 (<a href="https://github.com/koishijs/koishi/commit/25a635954802be9caf0b48a4a440908503e42ca5" target="_blank" rel="noopener noreferrer">25a6359</a>)</li> <li><strong>database-level:</strong> 将 @types/leveldown, @types/levelup 加入依赖 (<a href="https://github.com/koishijs/koishi/commit/3e53e9ef037002500fbaa16708579f1cafc7bb16" target="_blank" rel="noopener noreferrer">3e53e9e</a>)</li></ul> <h2 id="_1-0-1"><a href="#_1-0-1" class="header-anchor">#</a> <a href="https://github.com/koishijs/koishi/releases/tag/1.0.1" target="_blank" rel="noopener noreferrer">1.0.1</a></h2> <h3 id="bug-fixes-10"><a href="#bug-fixes-10" class="header-anchor">#</a> Bug Fixes</h3> <ul><li><strong>cli:</strong> koishi init 指令被 SIGINT 打断输入时自动取消文件写入 (<a href="https://github.com/koishijs/koishi/commit/1c59df5bdd9db1b5b67e4ee376826793f34747ab" target="_blank" rel="noopener noreferrer">1c59df5</a>)</li> <li><strong>utils:</strong> observe 传入的 update 函数应该覆盖过去的版本 (<a href="https://github.com/koishijs/koishi/commit/7f9756cf0996440c743464dd359cffc91ae6442e" target="_blank" rel="noopener noreferrer">7f9756c</a>, <a href="https://github.com/koishijs/koishi/commit/126cb03cc0576cac8e4916437fbe5fd524d265de" target="_blank" rel="noopener noreferrer">126cb03</a>)</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/koishijs/koishijs.github.io/edit/docs/api/changelog/koishi.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/1/2020, 5:35:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/database/sqlite.html" class="prev">数据库：sqlite</a></span> <span class="next"><a href="/api/changelog/test-utils.html">koishi-test-utils</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3f171bfd.js" defer></script><script src="/assets/js/2.3565e134.js" defer></script><script src="/assets/js/7.7ead5f91.js" defer></script><script src="/assets/js/11.0361f298.js" defer></script>
  </body>
</html>
